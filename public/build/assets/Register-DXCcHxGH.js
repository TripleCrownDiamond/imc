import{W as N,r as c,j as e,Y as y,a as C,b}from"./app-BXt_hrfz.js";import{T as l,I as n}from"./TextInput-BOwWz9tA.js";import{I as m}from"./InputLabel-Bnj0GI-I.js";import{P as F}from"./PrimaryButton-BD8oMcmo.js";import{G as P}from"./GuestLayout-BxOTR1pw.js";import{n as d}from"./index-C1dEH6De.js";import"./ApplicationLogo-tQLSnZ1g.js";function L(){const p=new URLSearchParams(window.location.search).get("sponsor_id")||"",{data:t,setData:r,post:f,processing:x,errors:o,reset:h}=N({first_name:"",last_name:"",username:"",email:"",password:"",password_confirmation:"",sponsor_id:p,country_id:""}),[j,w]=c.useState([]),[i,g]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const a=await b.get("/countries");w(a.data)}catch(a){console.error("Erreur lors de la récupération des pays:",a)}})()},[]);const v=s=>{s.preventDefault(),f(route("register"),{onSuccess:a=>{var u;(u=a.props.flash)!=null&&u.success&&(d.success(a.props.flash.success),h(),setTimeout(()=>{d("Redirection en cours..."),setTimeout(()=>{window.location.href=route("login")},1500)},1e3))},onError:a=>{for(const u in a)d.error(a[u])}})},_=()=>{g(!i)};return e.jsxs(P,{children:[e.jsx(y,{title:"Inscription"})," ",e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"first_name",value:"Prenom"})," ",e.jsx(l,{id:"first_name",name:"first_name",value:t.first_name,className:"mt-1 block w-full",autoComplete:"first_name",isFocused:!0,onChange:s=>r("first_name",s.target.value),required:!0}),e.jsx(n,{message:o.first_name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"last_name",value:"Nom"})," ",e.jsx(l,{id:"last_name",name:"last_name",value:t.last_name,className:"mt-1 block w-full",autoComplete:"last_name",isFocused:!0,onChange:s=>r("last_name",s.target.value),required:!0}),e.jsx(n,{message:o.last_name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"username",value:"Nom d'utilisateur"})," ",e.jsx(l,{id:"username",name:"username",value:t.username,className:"mt-1 block w-full",autoComplete:"username",isFocused:!0,onChange:s=>r("username",s.target.value),required:!0}),e.jsx(n,{message:o.username,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"email",value:"E-mail"})," ",e.jsx(l,{id:"email",type:"email",name:"email",value:t.email,className:"mt-1 block w-full",autoComplete:"email",onChange:s=>r("email",s.target.value),required:!0}),e.jsx(n,{message:o.email,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"country",value:"Pays"})," ",e.jsxs("select",{id:"country",name:"country",value:t.country,className:"mt-1 block w-full",onChange:s=>r("country",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Sélectionnez un pays"}),j.map(s=>e.jsxs("option",{value:s.name,children:[s.name," "]},s.id))]}),e.jsx(n,{message:o.country,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"password",value:"Mot de passe"})," ",e.jsx(l,{id:"password",type:i?"text":"password",name:"password",value:t.password,className:"mt-1 block w-full",autoComplete:"new-password",onChange:s=>r("password",s.target.value),required:!0}),e.jsx(n,{message:o.password,className:"mt-2"}),e.jsx("a",{href:"#",onClick:_,className:"text-sm text-blue-600 hover:underline mt-1",children:i?"Masquer le mot de passe":"Afficher le mot de passe"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"password_confirmation",value:"Confirmer le mot de passe"})," ",e.jsx(l,{id:"password_confirmation",type:i?"text":"password",name:"password_confirmation",value:t.password_confirmation,className:"mt-1 block w-full",autoComplete:"new-password",onChange:s=>r("password_confirmation",s.target.value),required:!0}),e.jsx(n,{message:o.password_confirmation,className:"mt-2"})]}),e.jsx("input",{type:"hidden",name:"sponsor_id",value:t.sponsor_id}),e.jsxs("div",{className:"mt-4 flex items-center justify-end",children:[e.jsx(C,{href:route("login"),className:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Déjà inscrit ? "}),e.jsx(F,{className:"ms-4",disabled:x,children:"S'inscrire "})]})]})]})}export{L as default};
